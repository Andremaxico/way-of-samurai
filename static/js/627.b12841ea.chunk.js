"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[627],{8331:function(t,e,s){s.d(e,{Z:function(){return d}});var a=s(1413),r=s(5987),o=(s(2791),"Textarea_Textarea__Vwi60"),i="Textarea_textarea__ro8Cq",n="Textarea_error__nqZBf",u="Textarea_errorMessage__6IvbI",l=s(184),c=["register","name","validation"],d=function(t){var e=t.register,s=t.name,d=t.validation,f=(0,r.Z)(t,c);return(0,l.jsxs)("div",{className:o,children:[(0,l.jsx)("textarea",(0,a.Z)((0,a.Z)((0,a.Z)({},e(s,(0,a.Z)((0,a.Z)({},d),{},{minLength:{value:2,message:"Your message must have more than 1 symbol"}}))),f),{},{className:"".concat(i," ").concat(f.className," ").concat(f.error&&n)})),f.error&&(0,l.jsx)("p",{className:u,children:f.error.message})]})}},7948:function(t,e,s){s.r(e),s.d(e,{default:function(){return L}});var a=s(885),r=s(2791),o=s(6871),i={container:"ProfileBody_container__IDU7r",profileBody:"ProfileBody_profileBody__YJWNv",cover:"ProfileBody_cover__1KR2Z",info:"ProfileBody_info__alpqF",avatar:"ProfileBody_avatar__WQwrJ",description:"ProfileBody_description__DC9Ea",login:"ProfileBody_login__cTPUm",statusText:"ProfileBody_statusText__dsdVz",defaultStatus:"ProfileBody_defaultStatus__vZOuL",statusInput:"ProfileBody_statusInput__VOoMQ",logoutBtn:"ProfileBody_logoutBtn__6VR8k"},n=s(2293),u=s.p+"static/media/default-cover.9d30c93d55630fcda356.png",l=s(184),c=function(t){var e=(0,r.useState)(t.status),s=(0,a.Z)(e,2),o=s[0],n=s[1],u=(0,r.useState)(!1),c=(0,a.Z)(u,2),d=c[0],f=c[1];(0,r.useEffect)((function(){t.status!==o&&n(t.status)}),[t.status]);return(0,l.jsx)("div",{className:i.profileStatus,children:d?(0,l.jsx)("textarea",{"data-testid":"status-textarea",className:i.statusInput,autoFocus:!0,maxLength:"300",value:o,onChange:function(t){var e=t.target.value;n(e)},onBlur:t.isMyProfile&&function(){o!=t.status&&t.updateMyStatus(o),f(!1)}}):(0,l.jsx)("p",{className:i.statusText,"data-testid":"status-text",onClick:t.isMyProfile&&function(){return f(!0)},children:o||(0,l.jsx)("i",{className:i.defaultStatus,children:"no info"})})})};var d=function(t){var e=t.profileInfo,s=e.fullName,a=(e.userId,e.photos),r=e.aboutMe,o=e.isMyProfile,d=a.small,f=a.large,_=s.split("").map((function(t){return t.toUpperCase()===t?" ".concat(t):t}));return(0,l.jsxs)("div",{className:i.profileBody,children:[(0,l.jsx)("div",{className:i.cover,children:(0,l.jsx)("img",{src:d||u,alt:"Cover img"})}),(0,l.jsxs)("div",{className:i.info,children:[(0,l.jsx)("div",{className:i.avatar,children:(0,l.jsx)("img",{src:f||n,alt:"Loading avatar..."})}),(0,l.jsxs)("div",{className:i.description,children:[(0,l.jsx)("p",{className:i.login,children:_}),(0,l.jsx)(c,{updateMyStatus:t.updateMyStatus,isMyProfile:o,status:r})]}),o&&(0,l.jsx)("button",{className:i.logoutBtn,onClick:function(){return t.logout()},children:"Logout"})]})]})},f=s(8687),_="Post_post__43cTw",x="Post_avatar__dGEbx",m="Post_text__swDVs";var p=function(t){return(0,l.jsxs)("div",{className:_,children:[(0,l.jsx)("div",{className:x,children:(0,l.jsx)("img",{src:t.avatarUrl})}),(0,l.jsxs)("div",{className:m,children:[(0,l.jsx)("p",{children:t.data.text}),(0,l.jsxs)("p",{children:["Likes count: ",t.data.likes]})]})]})},g="Profile_profile__iROPK",v="Profile_myPosts__3JCrI",h="Profile_title__g+iCI",P=function(t){var e=t.postsData.map((function(e,s){return(0,l.jsx)(p,{avatarUrl:t.avatarUrl||n,data:e},s)}));return(0,l.jsx)("div",{className:v,children:e})},j=(0,f.$j)((function(t){var e;return{postsData:t.profilePage.postsData,avatarUrl:(null===(e=t.profilePage.currUserProfileInfo)||void 0===e?void 0:e.photos.small)||n}}))(P),y=s(6868),I="NewPost_NewPost__l342s",N=s(5290),B=s(8331);var S=(0,f.$j)((function(t){return{newPostText:t.profilePage.newPostText}}),{addPost:y.q2})((function(t){var e=(0,N.cI)(),s=e.handleSubmit,a=e.resetField,r=e.watch,o=e.register,i=e.formState.errors;return(0,l.jsxs)("form",{className:I,onSubmit:s((function(){t.addPost(r("postText")),a("postText")})),children:[(0,l.jsx)(B.Z,{validation:{maxLength:{value:500,message:"Your post too long"}},name:"postText",placeholder:"text...",register:o,error:i.postText}),(0,l.jsx)("button",{children:"Add Post"})]})})),Z=s(6301),T=function(t){return t.currUserProfileInfo?(0,l.jsxs)("div",{className:g,children:[(0,l.jsx)(d,{profileInfo:t.currUserProfileInfo,updateMyStatus:t.updateMyStatus,logout:t.logout}),(0,l.jsx)("h2",{className:h,children:"My posts"}),(0,l.jsx)(S,{}),(0,l.jsx)(j,{})]}):(0,l.jsx)(Z.Z,{})},M=s(6626),U=s(445),w=function(t){return t.auth.data.isAuthed},C=s(8877),b=s(7781),k=s(2889),F={toggleIsFetching:M.ZR,setUserById:y.B3,updateMyStatus:y.NT,logout:U.kS},L=(0,b.qC)((0,f.$j)((function(t){return{currUserProfileInfo:t.profilePage.currUserProfileInfo,myProfileInfo:t.profilePage.myProfileInfo,myProfileId:t.auth.data.id,isFetching:t.usersPage.isFetching,isAuthed:w(t)}}),F),k.Z,C.Z)((function(t){var e=(0,r.useState)(null),s=(0,a.Z)(e,2),i=s[0],n=s[1];return(0,r.useEffect)((function(){t.router.params.userId?n(t.router.params.userId):n(null)}),[t.router.params.userId]),(0,r.useEffect)((function(){i&&t.setUserById(i).then((function(){return t.toggleIsFetching(!1)}))}),[i]),t.isAuthed||t.router.params.userId?t.isFetching?(0,l.jsx)(Z.Z,{}):(0,l.jsx)(T,{currUserProfileInfo:i?t.currUserProfileInfo:t.myProfileInfo,updateMyStatus:t.updateMyStatus,logout:t.logout}):(0,l.jsx)(o.Fg,{to:"/login",replace:!0})}))}}]);
//# sourceMappingURL=627.b12841ea.chunk.js.map